# Generated by the protocol buffer compiler.  DO NOT EDIT!
# Source: cleanup.proto for package 'gitaly'

require 'grpc'
require 'cleanup_pb'

module Gitaly
  module CleanupService
    # CleanupService provides RPCs to clean up a repository's contents.
    class Service

      include ::GRPC::GenericService

      self.marshal_class_method = :encode
      self.unmarshal_class_method = :decode
      self.service_name = 'gitaly.CleanupService'

      # ApplyBfgObjectMapStream ...
      rpc :ApplyBfgObjectMapStream, stream(::Gitaly::ApplyBfgObjectMapStreamRequest), stream(::Gitaly::ApplyBfgObjectMapStreamResponse)
      # RewriteHistory redacts targeted strings and deletes requested blobs in a
      # repository and updates all references to point to the rewritten commit
      # history. This is useful for removing inadvertently pushed secrets from your
      # repository and purging large blobs. This is a dangerous operation.
      #
      # The following known error conditions may happen:
      #
      # - `InvalidArgument` in the following situations:
      #    - The provided repository can't be validated.
      #    - The repository field is set on any request other than the initial one.
      #    - All of the client requests do not contain either blobs to remove or
      #      redaction patterns to redact.
      #    - A blob object ID is invalid.
      #    - A redaction pattern contains a newline character.
      # - `Aborted` if the repository is mutated while this RPC is executing.
      rpc :RewriteHistory, stream(::Gitaly::RewriteHistoryRequest), ::Gitaly::RewriteHistoryResponse
    end

    Stub = Service.rpc_stub_class
  end
end
